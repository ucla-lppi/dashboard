"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[491],{491:(e,t,s)=>{s.d(t,{A:()=>h});var l=s(5155),a=s(2115),r=s(4991);let n="/dashboard",i="".concat(n,"/data/ca_counties.geojson"),c={mapHeight:"551"};function o(){let e=(0,a.useRef)(null),t=(0,a.useRef)(null),s=(0,a.useRef)(null),[o,d]=a.useState(!1);return(0,a.useEffect)(()=>{t.current||(t.current=r.Ltv(e.current).append("svg").attr("preserveAspectRatio","xMidYMid meet").classed("w-full h-full",!0)),s.current||(s.current=r.Ltv("body").append("div").style("position","absolute").style("background","white").style("padding","5px").style("border-radius","5px").style("pointer-events","none").style("box-shadow","0 4px 6px rgba(0, 0, 0, 0.1)").style("opacity",0));let l=()=>{let l=e.current.getBoundingClientRect().width,a=c.mapHeight;r.Pq9(i).then(e=>{let n=r.bAh().fitSize([l,a],e),i=r.zFW().projection(n);t.current.selectAll("path").remove(),t.current.attr("viewBox","0 0 ".concat(l," ").concat(a)).attr("width",l).attr("height",a),t.current.selectAll("path").data(e.features).enter().append("path").attr("d",i).attr("fill","#ccc").attr("stroke","white").attr("stroke-width",.5).on("mouseover",(e,t)=>{r.Ltv(e.target).attr("fill","#aaa"),s.current.style("opacity",1).html("<strong>".concat(t.properties.name,"</strong>")).style("left","".concat(e.pageX+10,"px")).style("top","".concat(e.pageY+10,"px"))}).on("mousemove",e=>{s.current.style("left","".concat(e.pageX+10,"px")).style("top","".concat(e.pageY+10,"px"))}).on("mouseout",e=>{r.Ltv(e.target).attr("fill","#ccc"),s.current.style("opacity",0)}).on("click",(e,t)=>{alert("Clicked on ".concat(t.properties.name))}),d(!0)})};return l(),window.addEventListener("resize",l),()=>{window.removeEventListener("resize",l),s.current&&(s.current.remove(),s.current=null)}},[]),(0,l.jsxs)("div",{className:"relative w-full sm:mt-4 md:mt-8 lg:mt-0",style:{height:"".concat(c.mapHeight,"px")},children:[(0,l.jsx)("div",{ref:e,className:"w-full h-full",children:!o&&(0,l.jsx)(()=>(0,l.jsx)("div",{className:"relative w-full",style:{height:"".concat(c.mapHeight,"px")},children:(0,l.jsx)("div",{className:"absolute inset-0 bg-gray-200 animate-pulse rounded-lg"})}),{})}),o&&(0,l.jsxs)("div",{className:"absolute top-4 right-1 bg-white p-4 rounded-lg border-2 border-primary",children:[(0,l.jsxs)("div",{className:"flex items-center mb-2",children:[(0,l.jsx)("div",{className:"flex items-center justify-center bg-primary rounded-full w-[60px] h-7 min-w-[48px] min-h-[28px] mr-2",children:(0,l.jsx)("img",{src:"".concat(n,"/images/extremeheaticon-white.svg"),alt:"Extreme Heat Icon",className:"w-5 h-5"})}),(0,l.jsx)("span",{className:"text-sm font-medium",children:"Extreme Heat Fact Sheet"})]}),(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("div",{className:"flex items-center justify-center bg-primary rounded-full w-[60px] h-7 min-w-[48px] min-h-[28px] mr-2",children:(0,l.jsx)("img",{src:"".concat(n,"/images/airpollutionicon-white.svg"),alt:"Air Pollution Icon",className:"w-5 h-5"})}),(0,l.jsx)("span",{className:"text-sm font-medium",children:"Air Pollution Fact Sheet"})]})]})]})}let d=e=>"".concat("dashboard").concat(e);var m=s(408),x=s.n(m);function u(e){let{item:t}=e,[s,r]=(0,a.useState)(t.number_comparison);return(0,a.useEffect)(()=>{let e=String(t.number_comparison).match(/^([\d,.]+)(.*)$/);if(!e){r(t.number_comparison);return}let s=parseFloat(e[1].replace(/,/g,"")),l=e[2]||"";if(isNaN(s)){r(t.number_comparison);return}let a=performance.now();requestAnimationFrame(function e(n){let i=Math.min((n-a)/1200,1),c=s*i;r((s%1==0?Math.round(c):c.toFixed(2))+l),i<1?requestAnimationFrame(e):r(t.number_comparison)})},[t.number_comparison]),(0,l.jsxs)("div",{className:"flex flex-row items-stretch w-full max-w-2xl",children:[(0,l.jsx)("div",{className:"flex flex-col items-center justify-center rounded-l-[10px] border-2 border-[#aec8c3] bg-gradient-to-b from-primary to-accents min-w-[120px] max-w-[180px] w-2/5 py-4 px-2 relative",children:(0,l.jsxs)("div",{className:"flex flex-col items-center",children:[(0,l.jsx)("div",{className:"flex items-center justify-center w-[68px] h-[68px] bg-[#f2f2f2] rounded-full shadow-[0px_4px_4px_#00000040] mb-2",children:(0,l.jsx)("span",{className:"font-bold text-primary text-3xl text-center font-Lexend_Deca",children:s})}),(0,l.jsx)("div",{className:"w-full",children:(0,l.jsxs)("div",{className:"font-semibold text-white text-base text-center leading-tight font-Lexend_Deca",children:[t.label1||t.label,t.label2&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("br",{}),t.label2]})]})})]})}),(0,l.jsx)("div",{style:{width:5,minWidth:5,background:"white"}}),(0,l.jsx)("div",{className:"flex-1 bg-[#fcfcfc] rounded-r-[10px] border-2 border-[#aec8c3] flex items-center px-6 py-4",children:(0,l.jsx)("div",{className:"w-full text-[#002e45] text-base text-center font-Lexend_Deca",children:function(e){let t;let s=[],a=0,r=/\*(.*?)\*/g,n=0;for(;null!==(t=r.exec(e));)t.index>a&&s.push((0,l.jsx)("span",{children:e.slice(a,t.index)},n++)),s.push((0,l.jsx)("span",{className:"font-bold underline",children:t[1]},n++)),a=t.index+t[0].length;return a<e.length&&s.push((0,l.jsx)("span",{children:e.slice(a)},n++)),s}(t.detail)})})]})}function f(e){let{onLoaded:t}=e,s=(0,a.useRef)(null),[r,n]=(0,a.useState)([]),[i,c]=(0,a.useState)(""),[o,m]=(0,a.useState)(!1),[f,h]=(0,a.useState)({});(0,a.useEffect)(()=>{c(document.body.classList.contains("dark-mode")?"dark-mode":""),(async()=>{let e;{let t=await fetch("https://docs.google.com/spreadsheets/d/e/2PACX-1vQj-jsVttYyQfv02E_FWiPvoNXz1Yeq7lVCKJymnxkEz9cyF5Mak9T8NFaL__5J_EsxTOgZaEcsa7Qw/pub?gid=360206538&single=true&output=csv");e=await t.text()}x().parse(e,{header:!0,complete:e=>{n(e.data),m(!0),t&&t()}})})()},[t]);let p={Demographics:["White","Latino"],"Extreme Heat":["High Impact Latino","High Impact White"],"Exposure to Pollution Burden":["High Impact Latino","High Impact White"]},b=(e,t)=>r.filter(s=>s.type===e&&s.category===t).reduce((e,t)=>e+parseFloat(t.count),0);Object.keys(p).map(e=>{var t,s;let l=p[e].map(t=>{let s=b(e,t);return{label:t,totalValue:s}}),a=l.find(e=>e.label.includes("Latino")).totalValue,n=l.find(e=>e.label.includes("White")).totalValue,i=a-n,c=(i/n*100).toFixed(2),o=c.endsWith(".00")?parseInt(c):c,d=(null===(t=r.find(t=>t.type===e))||void 0===t?void 0:t.headerIntro)||"",m=(null===(s=r.find(t=>t.type===e))||void 0===s?void 0:s.headerIndicator)||"";return{category:e,subcategories:l,discrepancy:i,formattedDiscrepancyPercentage:o,latinoValue:a,whiteValue:n,headerIntro:d,headerIndicator:m}}),(0,a.useEffect)(()=>{let e=document.querySelectorAll(".ticker"),t=new IntersectionObserver((e,t)=>{e.forEach(e=>{if(e.isIntersecting){let s=e.target,l=parseFloat(s.getAttribute("data-count")),a=0,r=performance.now(),n=e=>{let t=Math.min((e-r)/2e3,1);if(a=l*t,s.innerText=l%1==0?Math.ceil(a).toLocaleString():a.toFixed(2),t<1)requestAnimationFrame(n);else{s.innerText=l%1==0?l.toLocaleString():a.toFixed(2);let e=s.nextElementSibling;e&&(e.style.display="inline")}};requestAnimationFrame(n),t.unobserve(s)}})},{threshold:.1});return e.forEach(e=>t.observe(e)),()=>{t.disconnect()}},[r]),(0,a.useEffect)(()=>{o&&document.querySelectorAll(".ticker, .discrepancy, .comparison").forEach(e=>{e.classList.add("fade-in")})},[o]),(0,a.useEffect)(()=>{if(o){let e={};document.querySelectorAll(".box").forEach((t,s)=>{e[s]=t.offsetHeight}),h(e)}},[o]),d("/images/lppi-bg.svg");let g=()=>(0,l.jsxs)("div",{className:"flex flex-row items-stretch w-full max-w-2xl animate-pulse",children:[(0,l.jsx)("div",{className:"flex flex-col items-center justify-center rounded-l-[10px] border-2 border-[#aec8c3] bg-gradient-to-b from-primary to-accents min-w-[120px] max-w-[180px] w-2/5 py-4 px-2 relative",children:(0,l.jsxs)("div",{className:"flex flex-col items-center",children:[(0,l.jsx)("div",{className:"flex items-center justify-center w-[68px] h-[68px] bg-[#e5e7eb] rounded-full mb-2"}),(0,l.jsx)("div",{className:"w-full h-4 bg-[#e5e7eb] rounded mt-2"}),(0,l.jsx)("div",{className:"w-2/3 h-3 bg-[#e5e7eb] rounded mt-1"})]})}),(0,l.jsx)("div",{style:{width:5,minWidth:5,background:"white"}}),(0,l.jsx)("div",{className:"flex-1 bg-[#fcfcfc] rounded-r-[10px] border-2 border-[#aec8c3] flex items-center px-6 py-4",children:(0,l.jsxs)("div",{className:"w-full",children:[(0,l.jsx)("div",{className:"h-4 bg-[#e5e7eb] rounded w-3/4 mx-auto mb-2"}),(0,l.jsx)("div",{className:"h-3 bg-[#e5e7eb] rounded w-1/2 mx-auto"})]})})]});return(0,l.jsx)("div",{ref:s,className:"container mx-auto py-8",children:(0,l.jsx)("div",{className:"flex flex-col items-center space-y-6",children:o?r.map((e,t)=>(0,l.jsx)(u,{item:e},t)):Array.from({length:3}).map((e,t)=>(0,l.jsx)(g,{},t))})})}function h(){let[e,t]=(0,a.useState)(!1);return(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-8 p-6 min-h-screen items-start",children:[(0,l.jsx)("div",{className:"col-span-2",children:(0,l.jsxs)("div",{className:"flex flex-col items-start",children:[(0,l.jsx)("h1",{className:"text-3xl font-bold text-primary",children:"California County Profiles"}),(0,l.jsx)("span",{className:"text-[#2f2f2f] text-xl font-bold font-Lexend_Deca block mt-0 mb-1",children:"Click on a county on the map to view its County Wellness Profile"})]})}),(0,l.jsxs)("div",{className:"relative flex flex-col",children:[(0,l.jsx)("div",{className:"flex flex-col sm:justify-start lg:justify-center h-full",children:(0,l.jsx)(o,{})}),(0,l.jsx)("div",{className:"flex flex-col items-start space-y-2",children:(0,l.jsxs)("div",{className:"flex flex-col items-center",children:[(0,l.jsxs)("button",{onClick:()=>document.getElementById("county-profiles").scrollIntoView({behavior:"smooth"}),className:"text-m font-semibold text-black mb-1 text-center",children:["jump to ",(0,l.jsx)("br",{}),"county profiles"]}),(0,l.jsx)("button",{onClick:()=>document.getElementById("county-profiles").scrollIntoView({behavior:"smooth"}),className:"bg-tertiary text-white p-3 rounded-full shadow-md","aria-label":"Go down",children:(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 transform rotate-90",fill:"none",viewBox:"0 0 24 24",stroke:"#000",strokeWidth:2,children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 12h14m-7-7l7 7-7 7"})})})]})})]}),(0,l.jsxs)("div",{className:"flex flex-col text-right justify-start",children:[(0,l.jsx)("div",{className:"flex items-center justify-end mb-6 mt-0",children:(0,l.jsx)("div",{className:"shadow-[0px_4px_8px_#0002] rounded-lg",children:(0,l.jsx)("div",{className:"relative rounded-lg bg-gradient-to-b from-primary to-accents flex items-center justify-center px-6 py-4 min-w-[220px]",children:(0,l.jsxs)("div",{className:"text-white text-xl font-semibold text-center leading-tight font-Lexend_Deca",children:["California Latino",(0,l.jsx)("br",{}),"Neighborhood Statistics"]})})})}),(0,l.jsx)(f,{onLoaded:()=>{t(!0)}})]})]})}}}]);