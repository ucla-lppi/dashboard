"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[491],{491:(e,t,s)=>{s.d(t,{A:()=>p});var l=s(5155),n=s(2115),i=s(4991),r=s(408),a=s.n(r);let o="/dashboard",c="".concat(o,"/data/ca_counties.geojson"),d={mapHeight:"551"};function x(e){let{county:t,x:s,y:n,hasFactSheet:i,onTooltipEnter:r,onTooltipLeave:a}=e;return(0,l.jsxs)("div",{className:i?"absolute z-50 w-[257px] h-[96px] rounded-[10px] shadow-[2px_2px_0px_#30303080] border border-[#005587] bg-white flex flex-col items-center justify-start pt-2 pb-3 overflow-visible select-none":"absolute z-50 w-[257px] h-54 bg-white rounded-[0px_10px_10px_10px] border border-solid border-[#005587] shadow-[2px_2px_0px_#30303080] text-black flex flex-col items-center justify-start pt-2 pb-3 overflow-visible select-none",style:{left:s,top:n,pointerEvents:"auto",position:"absolute"},onMouseEnter:r,onMouseLeave:a,children:[(0,l.jsx)("div",{className:"absolute left-0 top-0 w-10 h-3 pointer-events-none",children:(0,l.jsx)("svg",{width:"39",height:"12",viewBox:"0 0 39 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,l.jsx)("polygon",{points:"0,0 39,0 0,12",fill:"#005587"})})}),(0,l.jsx)("div",{className:"w-full flex flex-col items-center mt-2",children:(0,l.jsxs)("span",{className:"font-Lexend_Deca font-bold text-lg text-[#2f2f2f] text-center block whitespace-nowrap overflow-hidden text-ellipsis",children:[t," County"]})}),i?(0,l.jsxs)("div",{className:"flex flex-row items-center justify-center gap-4 w-full mt-2",children:[(0,l.jsxs)("a",{href:"#",className:"flex items-center bg-[#005587] rounded-[15px] px-4 py-1 shadow-[2px_2px_0px_#30303080] focus:outline-none",children:[(0,l.jsx)("img",{src:"".concat(o,"/images/extremeheaticon-white.svg"),alt:"Extreme Heat",className:"w-5 h-5 mr-2"}),(0,l.jsx)("svg",{className:"w-4 h-4 ml-1",fill:"none",stroke:"white",strokeWidth:"2",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5l7 7-7 7"})})]}),(0,l.jsxs)("a",{href:"#",className:"flex items-center bg-[#005587] rounded-[15px] px-4 py-1 shadow-[2px_2px_0px_#30303080] focus:outline-none",children:[(0,l.jsx)("img",{src:"".concat(o,"/images/airpollutionicon-white.svg"),alt:"Air Pollution",className:"w-5 h-5 mr-2"}),(0,l.jsx)("svg",{className:"w-4 h-4 ml-1",fill:"none",stroke:"white",strokeWidth:"2",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5l7 7-7 7"})})]})]}):(0,l.jsxs)("div",{className:"flex flex-col items-center w-full mt-1",children:[(0,l.jsx)("div",{className:"w-full text-base text-center font-normal font-Lexend_Deca text-black",children:"No fact sheet available."}),(0,l.jsxs)("a",{href:"#",className:"flex items-center bg-[#005587] rounded-[15px] px-4 py-0 shadow-[2px_2px_0px_#30303080] focus:outline-none mt-3",children:[(0,l.jsx)("span",{className:"text-white text-lg font-medium font-Lexend_Deca",children:"FAQ"}),(0,l.jsx)("svg",{className:"w-6 h-[19px] ml-2",fill:"none",stroke:"white",strokeWidth:"2",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5l7 7-7 7"})})]})]})]})}function m(){let e=(0,n.useRef)(null),t=(0,n.useRef)(null),s=(0,n.useRef)(null),[r,m]=n.useState(!1),[u,h]=n.useState({show:!1,county:"",x:0,y:0,hasFactSheet:!1}),[f,p]=n.useState([]),[b,g]=n.useState(!1),[w,v]=n.useState(!1);return(0,n.useEffect)(()=>{a().parse("https://docs.google.com/spreadsheets/d/e/2PACX-1vQj-jsVttYyQfv02E_FWiPvoNXz1Yeq7lVCKJymnxkEz9cyF5Mak9T8NFaL__5J_EsxTOgZaEcsa7Qw/pub?gid=1862778319&single=true&output=csv",{download:!0,header:!0,complete:e=>{p(e.data.map(e=>e.county&&e.county.trim()).filter(Boolean))}})},[]),(0,n.useEffect)(()=>{t.current||(t.current=i.Ltv(e.current).append("svg").attr("preserveAspectRatio","xMidYMid meet").classed("w-full h-full",!0)),s.current||(s.current=i.Ltv("body").append("div").style("position","absolute").style("background","white").style("padding","5px").style("border-radius","5px").style("pointer-events","none").style("box-shadow","0 4px 6px rgba(0, 0, 0, 0.1)").style("opacity",0));let l=()=>{let s=e.current.getBoundingClientRect().width,l=d.mapHeight;i.Pq9(c).then(n=>{let r=i.bAh().fitSize([s,l],n),a=i.zFW().projection(r);t.current.selectAll("path").remove(),t.current.attr("viewBox","0 0 ".concat(s," ").concat(l)).attr("width",s).attr("height",l),t.current.selectAll("path").data(n.features).enter().append("path").attr("d",a).attr("fill","#ccc").attr("stroke","white").attr("stroke-width",.5).on("mouseenter",(s,l)=>{g(!0);let n=l.properties.name,r=f.includes(n),o=a.centroid(l),c=t.current.node(),d=c.getBoundingClientRect(),x=e.current.getBoundingClientRect(),m=d.width/+c.getAttribute("width"),u=d.height/+c.getAttribute("height"),p=o[0]*m+(d.left-x.left)+0,b=o[1]*u+(d.top-x.top)+0;h({show:!0,county:n,x:p,y:b,hasFactSheet:r,fixedX:p,fixedY:b}),i.Ltv(s.target).attr("fill","#aaa")}).on("mousemove",e=>{}).on("mouseleave",e=>{g(!1),i.Ltv(e.target).attr("fill","#ccc")}),m(!0)})};return l(),window.addEventListener("resize",l),()=>{window.removeEventListener("resize",l),s.current&&(s.current.remove(),s.current=null)}},[f,w]),(0,n.useEffect)(()=>{b||w||h(e=>({...e,show:!1}))},[b,w]),(0,l.jsxs)("div",{className:"relative w-full sm:mt-4 md:mt-8 lg:mt-0",style:{height:"".concat(d.mapHeight,"px")},children:[(0,l.jsx)("div",{ref:e,className:"w-full h-full relative",children:u.show&&(0,l.jsx)(x,{...u,x:u.fixedX,y:u.fixedY,onTooltipEnter:()=>v(!0),onTooltipLeave:()=>v(!1)})}),r&&(0,l.jsxs)("div",{className:"absolute top-4 right-1 bg-white p-4 rounded-lg border-2 border-primary",children:[(0,l.jsxs)("div",{className:"flex items-center mb-2",children:[(0,l.jsx)("div",{className:"flex items-center justify-center bg-primary rounded-full w-[60px] h-7 min-w-[48px] min-h-[28px] mr-2",children:(0,l.jsx)("img",{src:"".concat(o,"/images/extremeheaticon-white.svg"),alt:"Extreme Heat Icon",className:"w-5 h-5"})}),(0,l.jsx)("span",{className:"text-sm font-medium",children:"Extreme Heat Fact Sheet"})]}),(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("div",{className:"flex items-center justify-center bg-primary rounded-full w-[60px] h-7 min-w-[48px] min-h-[28px] mr-2",children:(0,l.jsx)("img",{src:"".concat(o,"/images/airpollutionicon-white.svg"),alt:"Air Pollution Icon",className:"w-5 h-5"})}),(0,l.jsx)("span",{className:"text-sm font-medium",children:"Air Pollution Fact Sheet"})]})]})]})}let u=e=>"".concat("dashboard").concat(e);function h(e){let{item:t}=e,[s,i]=(0,n.useState)(t.number_comparison);return(0,n.useEffect)(()=>{let e=String(t.number_comparison).match(/^([\d,.]+)(.*)$/);if(!e){i(t.number_comparison);return}let s=parseFloat(e[1].replace(/,/g,"")),l=e[2]||"";if(isNaN(s)){i(t.number_comparison);return}let n=performance.now();requestAnimationFrame(function e(r){let a=Math.min((r-n)/1200,1),o=s*a;i((s%1==0?Math.round(o):o.toFixed(2))+l),a<1?requestAnimationFrame(e):i(t.number_comparison)})},[t.number_comparison]),(0,l.jsxs)("div",{className:"flex flex-row items-stretch w-full max-w-2xl",children:[(0,l.jsx)("div",{className:"flex flex-col items-center justify-center rounded-l-[10px] border-2 border-[#aec8c3] bg-gradient-to-b from-primary to-accents min-w-[120px] max-w-[180px] w-2/5 py-4 px-2 relative",children:(0,l.jsxs)("div",{className:"flex flex-col items-center",children:[(0,l.jsx)("div",{className:"flex items-center justify-center w-[68px] h-[68px] bg-[#f2f2f2] rounded-full shadow-[0px_4px_4px_#00000040] mb-2",children:(0,l.jsx)("span",{className:"font-bold text-primary text-3xl text-center font-Lexend_Deca",children:s})}),(0,l.jsx)("div",{className:"w-full",children:(0,l.jsxs)("div",{className:"font-semibold text-white text-base text-center leading-tight font-Lexend_Deca",children:[t.label1||t.label,t.label2&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("br",{}),t.label2]})]})})]})}),(0,l.jsx)("div",{style:{width:5,minWidth:5,background:"white"}}),(0,l.jsx)("div",{className:"flex-1 bg-[#fcfcfc] rounded-r-[10px] border-2 border-[#aec8c3] flex items-center px-6 py-4",children:(0,l.jsx)("div",{className:"w-full text-[#002e45] text-base text-center font-Lexend_Deca",children:function(e){let t;let s=[],n=0,i=/\*(.*?)\*/g,r=0;for(;null!==(t=i.exec(e));)t.index>n&&s.push((0,l.jsx)("span",{children:e.slice(n,t.index)},r++)),s.push((0,l.jsx)("span",{className:"font-bold underline",children:t[1]},r++)),n=t.index+t[0].length;return n<e.length&&s.push((0,l.jsx)("span",{children:e.slice(n)},r++)),s}(t.detail)})})]})}function f(e){let{onLoaded:t}=e,s=(0,n.useRef)(null),[i,r]=(0,n.useState)([]),[o,c]=(0,n.useState)(""),[d,x]=(0,n.useState)(!1),[m,f]=(0,n.useState)({});(0,n.useEffect)(()=>{c(document.body.classList.contains("dark-mode")?"dark-mode":""),(async()=>{let e;{let t=await fetch("https://docs.google.com/spreadsheets/d/e/2PACX-1vQj-jsVttYyQfv02E_FWiPvoNXz1Yeq7lVCKJymnxkEz9cyF5Mak9T8NFaL__5J_EsxTOgZaEcsa7Qw/pub?gid=360206538&single=true&output=csv");e=await t.text()}a().parse(e,{header:!0,complete:e=>{r(e.data),x(!0),t&&t()}})})()},[t]);let p={Demographics:["White","Latino"],"Extreme Heat":["High Impact Latino","High Impact White"],"Exposure to Pollution Burden":["High Impact Latino","High Impact White"]},b=(e,t)=>i.filter(s=>s.type===e&&s.category===t).reduce((e,t)=>e+parseFloat(t.count),0);Object.keys(p).map(e=>{var t,s;let l=p[e].map(t=>{let s=b(e,t);return{label:t,totalValue:s}}),n=l.find(e=>e.label.includes("Latino")).totalValue,r=l.find(e=>e.label.includes("White")).totalValue,a=n-r,o=(a/r*100).toFixed(2),c=o.endsWith(".00")?parseInt(o):o,d=(null===(t=i.find(t=>t.type===e))||void 0===t?void 0:t.headerIntro)||"",x=(null===(s=i.find(t=>t.type===e))||void 0===s?void 0:s.headerIndicator)||"";return{category:e,subcategories:l,discrepancy:a,formattedDiscrepancyPercentage:c,latinoValue:n,whiteValue:r,headerIntro:d,headerIndicator:x}}),(0,n.useEffect)(()=>{let e=document.querySelectorAll(".ticker"),t=new IntersectionObserver((e,t)=>{e.forEach(e=>{if(e.isIntersecting){let s=e.target,l=parseFloat(s.getAttribute("data-count")),n=0,i=performance.now(),r=e=>{let t=Math.min((e-i)/2e3,1);if(n=l*t,s.innerText=l%1==0?Math.ceil(n).toLocaleString():n.toFixed(2),t<1)requestAnimationFrame(r);else{s.innerText=l%1==0?l.toLocaleString():n.toFixed(2);let e=s.nextElementSibling;e&&(e.style.display="inline")}};requestAnimationFrame(r),t.unobserve(s)}})},{threshold:.1});return e.forEach(e=>t.observe(e)),()=>{t.disconnect()}},[i]),(0,n.useEffect)(()=>{d&&document.querySelectorAll(".ticker, .discrepancy, .comparison").forEach(e=>{e.classList.add("fade-in")})},[d]),(0,n.useEffect)(()=>{if(d){let e={};document.querySelectorAll(".box").forEach((t,s)=>{e[s]=t.offsetHeight}),f(e)}},[d]),u("/images/lppi-bg.svg");let g=()=>(0,l.jsxs)("div",{className:"flex flex-row items-stretch w-full max-w-2xl animate-pulse",children:[(0,l.jsx)("div",{className:"flex flex-col items-center justify-center rounded-l-[10px] border-2 border-[#aec8c3] bg-gradient-to-b from-primary to-accents min-w-[120px] max-w-[180px] w-2/5 py-4 px-2 relative",children:(0,l.jsxs)("div",{className:"flex flex-col items-center",children:[(0,l.jsx)("div",{className:"flex items-center justify-center w-[68px] h-[68px] bg-[#e5e7eb] rounded-full mb-2"}),(0,l.jsx)("div",{className:"w-full h-4 bg-[#e5e7eb] rounded mt-2"}),(0,l.jsx)("div",{className:"w-2/3 h-3 bg-[#e5e7eb] rounded mt-1"})]})}),(0,l.jsx)("div",{style:{width:5,minWidth:5,background:"white"}}),(0,l.jsx)("div",{className:"flex-1 bg-[#fcfcfc] rounded-r-[10px] border-2 border-[#aec8c3] flex items-center px-6 py-4",children:(0,l.jsxs)("div",{className:"w-full",children:[(0,l.jsx)("div",{className:"h-4 bg-[#e5e7eb] rounded w-3/4 mx-auto mb-2"}),(0,l.jsx)("div",{className:"h-3 bg-[#e5e7eb] rounded w-1/2 mx-auto"})]})})]});return(0,l.jsx)("div",{ref:s,className:"container mx-auto py-8",children:(0,l.jsx)("div",{className:"flex flex-col items-center space-y-6",children:d?i.map((e,t)=>(0,l.jsx)(h,{item:e},t)):Array.from({length:3}).map((e,t)=>(0,l.jsx)(g,{},t))})})}function p(){let[e,t]=(0,n.useState)(!1);return(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-8 p-6 min-h-screen items-start",children:[(0,l.jsx)("div",{className:"col-span-2",children:(0,l.jsxs)("div",{className:"flex flex-col items-start",children:[(0,l.jsx)("h1",{className:"text-3xl font-bold text-primary",children:"California County Profiles"}),(0,l.jsx)("span",{className:"text-[#2f2f2f] text-xl font-bold font-Lexend_Deca block mt-0 mb-1",children:"Click on a county on the map to view its County Wellness Profile"})]})}),(0,l.jsxs)("div",{className:"relative flex flex-col",children:[(0,l.jsx)("div",{className:"flex flex-col sm:justify-start lg:justify-center h-full",children:(0,l.jsx)(m,{})}),(0,l.jsx)("div",{className:"flex flex-col items-start space-y-2",children:(0,l.jsxs)("div",{className:"flex flex-col items-center",children:[(0,l.jsxs)("button",{onClick:()=>document.getElementById("county-profiles").scrollIntoView({behavior:"smooth"}),className:"text-m font-semibold text-black mb-1 text-center",children:["jump to ",(0,l.jsx)("br",{}),"county profiles"]}),(0,l.jsx)("button",{onClick:()=>document.getElementById("county-profiles").scrollIntoView({behavior:"smooth"}),className:"bg-tertiary text-white p-3 rounded-full shadow-md","aria-label":"Go down",children:(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 transform rotate-90",fill:"none",viewBox:"0 0 24 24",stroke:"#000",strokeWidth:2,children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 12h14m-7-7l7 7-7 7"})})})]})})]}),(0,l.jsxs)("div",{className:"flex flex-col text-right justify-start",children:[(0,l.jsx)("div",{className:"flex items-center justify-end mb-6 mt-0",children:(0,l.jsx)("div",{className:"shadow-[0px_4px_8px_#0002] rounded-lg",children:(0,l.jsx)("div",{className:"relative rounded-lg bg-gradient-to-b from-primary to-accents flex items-center justify-center px-6 py-4 min-w-[220px]",children:(0,l.jsxs)("div",{className:"text-white text-xl font-semibold text-center leading-tight font-Lexend_Deca",children:["California Latino",(0,l.jsx)("br",{}),"Neighborhood Statistics"]})})})}),(0,l.jsx)(f,{onLoaded:()=>{t(!0)}})]})]})}}}]);