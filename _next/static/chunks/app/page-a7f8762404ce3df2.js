(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{296:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>c});var r=a(5155),s=a(6379),l=a.n(s),n=a(491),i=a(5640);function c(e){let{children:t}=e;return(0,r.jsx)("main",{className:"".concat(l().className),children:(0,r.jsx)(i.Z,{className:"bg-[#fcfcfc] dark:bg-[#fcfcfc] rounded-[10px] shadow-[6px_6px_0px_var(--quaternary-color)] h-auto border-0",children:(0,r.jsx)(n.A,{})})})}},491:(e,t,a)=>{"use strict";a.d(t,{A:()=>h});var r=a(5155),s=a(2115),l=a(4991);let n="".concat("/dashboard","/static/data/ca_counties.geojson"),i={mapHeight:"551"};function c(){let e=(0,s.useRef)(null),t=(0,s.useRef)(null),a=(0,s.useRef)(null);return(0,s.useEffect)(()=>{t.current||(t.current=l.Ltv(e.current).append("svg").attr("preserveAspectRatio","xMidYMid meet").classed("w-full h-full",!0)),a.current||(a.current=l.Ltv("body").append("div").style("position","absolute").style("background","white").style("padding","5px").style("border-radius","5px").style("pointer-events","none").style("box-shadow","0 4px 6px rgba(0, 0, 0, 0.1)").style("opacity",0));let r=()=>{let r=e.current.getBoundingClientRect().width,s=i.mapHeight;l.Pq9(n).then(e=>{let n=l.bAh().fitSize([r,s],e),i=l.zFW().projection(n);t.current.selectAll("path").remove(),t.current.attr("viewBox","0 0 ".concat(r," ").concat(s)).attr("width",r).attr("height",s),t.current.selectAll("path").data(e.features).enter().append("path").attr("d",i).attr("fill","#ccc").attr("stroke","white").attr("stroke-width",.5).on("mouseover",(e,t)=>{l.Ltv(e.target).attr("fill","#aaa"),a.current.style("opacity",1).html("<strong>".concat(t.properties.name,"</strong>")).style("left","".concat(e.pageX+10,"px")).style("top","".concat(e.pageY+10,"px"))}).on("mousemove",e=>{a.current.style("left","".concat(e.pageX+10,"px")).style("top","".concat(e.pageY+10,"px"))}).on("mouseout",e=>{l.Ltv(e.target).attr("fill","#ccc"),a.current.style("opacity",0)}).on("click",(e,t)=>{alert("Clicked on ".concat(t.properties.name))})})};return r(),window.addEventListener("resize",r),()=>{window.removeEventListener("resize",r),a.current&&(a.current.remove(),a.current=null)}},[]),(0,r.jsxs)("div",{className:"relative w-full sm:mt-4 md:mt-8 lg:mt-0",style:{height:"".concat(i.heightOption,"px")},children:[(0,r.jsx)("div",{ref:e,className:"w-full h-full"}),(0,r.jsxs)("div",{className:"absolute top-4 right-1 bg-white p-4 rounded-lg shadow-[3px_3px_0px_var(--quaternary-color)] border border-primary",children:[(0,r.jsxs)("div",{className:"flex items-center mb-2",children:[(0,r.jsx)("img",{src:"./images/extremeheaticon.svg",alt:"Extreme Heat Icon",width:"27",height:"23",className:"mr-2"}),(0,r.jsx)("span",{className:"text-sm font-medium",children:"Extreme Heat Fact Sheet"})]}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("img",{src:"./images/airpollutionicon.svg",alt:"Air Pollution Icon",width:"27",height:"23",className:"mr-2"}),(0,r.jsx)("span",{className:"text-sm font-medium",children:"Air Pollution Fact Sheet"})]})]})]})}let o=e=>"".concat("dashboard").concat(e);var d=a(408),m=a.n(d);function u(e){let{onLoaded:t}=e,a=(0,s.useRef)(null),[l,n]=(0,s.useState)([]),[i,c]=(0,s.useState)(""),[d,u]=(0,s.useState)(!1),[h,p]=(0,s.useState)({});(0,s.useEffect)(()=>{c(document.body.classList.contains("dark-mode")?"dark-mode":""),(async()=>{let e;{let t=await fetch("https://docs.google.com/spreadsheets/d/e/2PACX-1vS_YYdPSeEUznhdpsonMOsvZQ2Lq3R2SuJKSbvDwJ9vwvv5V4RMZEwKISWhWTpy_kokJy-DTWa5cJVF/pub?output=csv");e=await t.text()}m().parse(e,{header:!0,complete:e=>{n(e.data),u(!0),t&&t()}})})()},[t]);let x={Demographics:["White","Latino"],"Extreme Heat":["High Impact Latino","High Impact White"],"Exposure to Pollution Burden":["High Impact Latino","High Impact White"]},f=(e,t)=>l.filter(a=>a.type===e&&a.category===t).reduce((e,t)=>e+parseFloat(t.count),0),g=Object.keys(x).map(e=>{var t,a;let r=x[e].map(t=>{let a=f(e,t);return{label:t,totalValue:a}}),s=r.find(e=>e.label.includes("Latino")).totalValue,n=r.find(e=>e.label.includes("White")).totalValue,i=s-n,c=(i/n*100).toFixed(2),o=c.endsWith(".00")?parseInt(c):c,d=(null===(t=l.find(t=>t.type===e))||void 0===t?void 0:t.headerIntro)||"",m=(null===(a=l.find(t=>t.type===e))||void 0===a?void 0:a.headerIndicator)||"";return{category:e,subcategories:r,discrepancy:i,formattedDiscrepancyPercentage:o,latinoValue:s,whiteValue:n,headerIntro:d,headerIndicator:m}});(0,s.useEffect)(()=>{let e=document.querySelectorAll(".ticker"),t=new IntersectionObserver((e,t)=>{e.forEach(e=>{if(e.isIntersecting){let a=e.target,r=parseFloat(a.getAttribute("data-count")),s=0,l=performance.now(),n=e=>{let t=Math.min((e-l)/2e3,1);if(s=r*t,a.innerText=r%1==0?Math.ceil(s).toLocaleString():s.toFixed(2),t<1)requestAnimationFrame(n);else{a.innerText=r%1==0?r.toLocaleString():s.toFixed(2);let e=a.nextElementSibling;e&&(e.style.display="inline")}};requestAnimationFrame(n),t.unobserve(a)}})},{threshold:.1});return e.forEach(e=>t.observe(e)),()=>{t.disconnect()}},[l]),(0,s.useEffect)(()=>{d&&document.querySelectorAll(".ticker, .discrepancy, .comparison").forEach(e=>{e.classList.add("fade-in")})},[d]),(0,s.useEffect)(()=>{if(d){let e={};document.querySelectorAll(".box").forEach((t,a)=>{e[a]=t.offsetHeight}),p(e)}},[d]),o("/images/lppi-bg.svg");let v=(e,t)=>(0,r.jsxs)("span",{children:[e," ",(0,r.jsx)("br",{}),(0,r.jsx)("strong",{style:{fontSize:"1.5rem"},children:t})]});return(0,r.jsx)("div",{ref:a,className:"container mx-auto py-8",children:(0,r.jsx)("div",{className:"flex flex-col items-center space-y-6",children:g.map((e,t)=>(0,r.jsx)("div",{className:"card p-6 shadow-[6px_6px_0px_var(--quaternary-color)] border border-primary rounded-lg bg-white w-full max-w-md ".concat("dark-mode"===i?"dark:bg-gray-800 dark:border-primary":""),children:d?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-2 text-center",children:v(e.headerIntro,e.headerIndicator)}),(0,r.jsx)("h2",{className:"text-3xl font-bold text-primary mb-2 text-center",children:(0,r.jsx)("span",{className:"ticker","data-count":e.latinoValue,children:e.latinoValue})})]}):(0,r.jsx)("div",{className:"flex justify-center items-center h-24",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-primary"})})},t))})})}function h(){let[e,t]=(0,s.useState)(!1);return(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-8 p-6 min-h-screen items-start",children:[" ",(0,r.jsxs)("div",{className:"relative flex flex-col space-y-8",children:[(0,r.jsxs)("div",{className:"flex items-center h-16",children:[" ",(0,r.jsx)("h1",{className:"text-3xl font-bold text-primary",children:"California County Profiles"})]}),(0,r.jsx)("p",{className:"text-gray-600 mt-2",children:"Click on a county on the map to view its County Wellness Profile"}),(0,r.jsxs)("div",{className:"flex flex-col sm:justify-start lg:justify-center h-full",children:[" ",(0,r.jsx)(c,{})]})]}),(0,r.jsxs)("div",{className:"flex flex-col space-y-4 text-right justify-end",children:[" ",(0,r.jsxs)("div",{className:"flex items-center h-16 justify-end",children:[" ",(0,r.jsxs)("h2",{className:"headline headline--medium t-right font-bold",children:["California",(0,r.jsx)("br",{}),(0,r.jsx)("span",{className:"text-primary text-3xl leading-tight",children:"Latino Wellness"}),(0,r.jsx)("br",{}),"Summary Statistics"]})]}),(0,r.jsx)(u,{onLoaded:()=>{t(!0)}})]})]})}},5181:(e,t,a)=>{Promise.resolve().then(a.bind(a,296))},6379:e=>{e.exports={style:{fontFamily:"'Lexend Deca', 'Lexend Deca Fallback'",fontStyle:"normal"},className:"__className_4b004e",variable:"__variable_4b004e"}}},e=>{var t=t=>e(e.s=t);e.O(0,[878,923,441,684,358],()=>t(5181)),_N_E=e.O()}]);